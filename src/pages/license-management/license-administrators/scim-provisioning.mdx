# SCIM provisioning with Bruno

Bruno supports SCIM (System for Cross-domain Identity Management). Allowing you to automate the provisioning and de-provisioning of licenses for your team. 

## Setting up SCIM with Okta Secure Web Authentication (SWA)

### Create your Okta App

1. As an Okta admin, navigate to 'Applications' and click 'Create App Integraion'

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-1.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

2. Select 'SWA - Secure Web Authetication' and click 'Next'

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-2.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

3. On the 'Create SWA Integration' page, add the following values and click 'Finish':
 - App name: {Unique App Name - e.g. Bruno SCIM Integration}
 - App's login page URL: https://license.usebruno.com/

 <Image src="public/screenshots/sso-scim-management/okta/okta-swa-3.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

 ### Configure your Okta App

1. On your newly created application page, select the 'General' tab

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-4.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

2. Under 'App Settings', select 'Edit', and check the 'Provisioning' option 'SCIM' and click 'Save'

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-5.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

3. Navigate to the Bruno license portal: https://license.usebruno.com/
 - Navigate to `Settings`
 - Click on `SCIM Provisioning` page
 - Toggle `Enable SCIM`on
 - Note the `SCIM Base URL`
 - Click `Generate New API Key` copy the key for the next step

<image src="public/screenshots/sso-scim-management/okta/okta-swa-6.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

3. Return to your Okta app, select the 'Provisiong' tab, under 'SCIM Connection' select 'Edit' and configure the following values:
 - *SCIM connector base URL*: `https://license.usebruno.com/scim/v2`
 - *Unique identifier field for users*: `email``
 - *Supported provisioning actions*: Check the options for`Import New Users and Profile Updates`, `Push New Users`, `Push Profile Updates`, and `Push Groups`
 - *Authentication*: set to `HTTP Header`
 - Under *HTTP Header*, for *token*:  add the generated API Key value from the prior step

 <Image src="public/screenshots/sso-scim-management/okta/okta-swa-7.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

4. Click *Test Connector Configuration*. If successful, a 'Connector configured successfully' message dialogue appears.

<image src="public/screenshots/sso-scim-management/okta/okta-swa-8.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

5. Click 'Save' to complete the Provisioning integration.

6. Under the 'Provisioning' tab, select the 'To Apps' setting, edit and enable the following options and click 'Save':
 - *Create Users*
 - *Update User Attributes*
 - *Deactivate Users*

 <Image src="public/screenshots/sso-scim-management/okta/okta-swa-9.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

Your SCIM integration is now complete. You can now begin assigning users to Bruno.

### Assign people and groups to Bruno in Okta
1. Under your created Bruno Application, navigate to the 'Assignments' tab

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-10.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

2. Select *Assign* and either *Assign to People* or *Assign to Groups* to provision Bruno license keys

<Image src="public/screenshots/sso-scim-management/okta/okta-swa-11.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

3. Assigned Users will receive an email with their *License Key*

<image src="public/screenshots/sso-scim-management/okta/okta-swa-12.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

### Deprovision users from Bruno in Okta
1. Under your created Bruno Application, navigate to the 'Assignments' tab
2. Remove the desired users or groups, their license key(s) will be deactivated
<Image src="public/screenshots/sso-scim-management/okta/okta-swa-13.webp" alt="License portal login" width={800} height={600} className="rounded mt-4" />

